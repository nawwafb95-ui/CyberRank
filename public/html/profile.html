<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SOCyberX | Profile</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/css/base.css" />
    <link rel="stylesheet" href="/css/components.css" />
    <link rel="stylesheet" href="/css/pages.css" />
    <link rel="stylesheet" href="/css/profile.css" />
    <link rel="stylesheet" href="/css/sidebar.css" />
    <link rel="stylesheet" href="/css/auth.css" />

    <link rel="icon" type="image/png" href="/images/favicon.png" />
  </head>

  <body data-theme="night" data-page="profile">
    <main class="container profile-container" style="padding-top:0;">
      <!-- Profile Header -->
      <div class="profile-page-header">
        <div class="profile-header">
          <div class="profile-avatar">
            <div class="profile-avatar__placeholder">
              <img id="profile-avatar-img" src="" alt="Profile Avatar" class="profile-avatar__img" />
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="profile-avatar__fallback" style="display: none;">
                <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M20.59 22C20.59 18.13 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          <div class="profile-header__info">
            <h1 id="profile-fullname">‚Äî</h1>
            <p class="muted" id="profile-email-display">‚Äî</p>
          </div>
        </div>
      </div>

      <!-- Tabs Navigation -->
      <div class="profile-tabs" id="profile-tabs">
        <button class="profile-tab active" data-section="account-settings">Account Settings</button>
        <button class="profile-tab" data-section="security">Security</button>
        <button class="profile-tab" data-section="points">Points</button>
        <button class="profile-tab" data-section="danger-zone">Delete Account</button>
      </div>

      <!-- Message area -->
      <div id="profileMsg" style="margin-bottom: 20px; min-height: 20px; display: none;"></div>

      <div class="card profile-card" id="profile-card">

        <!-- Account Settings Section -->
        <section id="account-settings" class="profile-section">
          <div class="profile-section__header">
            <h2 class="profile-section__title">Account Settings</h2>
            <button type="button" id="edit-profile-btn" class="btn btn--edit">Edit Profile</button>
          </div>

          <div class="profile-card-section">
              
              <!-- View Mode -->
              <div id="profile-view-mode" class="profile-view-mode">
                <div class="profile-field-row">
                  <div class="profile-field-label">Username</div>
                  <div class="profile-field-value" id="view-username">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">Email</div>
                  <div class="profile-field-value" id="view-email">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">Date of Birth</div>
                  <div class="profile-field-value" id="view-dob">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">Major</div>
                  <div class="profile-field-value" id="view-major">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">University</div>
                  <div class="profile-field-value" id="view-university">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">Country</div>
                  <div class="profile-field-value" id="view-country">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">User Type</div>
                  <div class="profile-field-value" id="view-usertype">‚Äî</div>
                </div>
                <div class="profile-field-row">
                  <div class="profile-field-label">Stage / Level</div>
                  <div class="profile-field-value" id="view-stage">‚Äî</div>
                </div>
              </div>

              <!-- Edit Mode -->
              <form id="profile-form" class="profile-edit-mode" style="display: none !important;">
                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-username" class="floating-input" placeholder=" " required />
                    <label for="profile-username" class="floating-label">Username</label>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="email" id="profile-email" class="floating-input" placeholder=" " disabled />
                    <label for="profile-email" class="floating-label">Email</label>
                  </div>
                  <small class="field-hint">Email cannot be changed</small>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="date" id="profile-dob" class="floating-input dob-input" placeholder=" " />
                    <label for="profile-dob" class="floating-label">Date of Birth</label>
                  </div>
                  <small id="dob-hint" class="dob-hint"></small>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-major" class="floating-input" placeholder=" " />
                    <label for="profile-major" class="floating-label">Major</label>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-university" class="floating-input" placeholder=" " />
                    <label for="profile-university" class="floating-label">University</label>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-country" class="floating-input" placeholder=" " />
                    <label for="profile-country" class="floating-label">Country</label>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-usertype" class="floating-input" placeholder=" " />
                    <label for="profile-usertype" class="floating-label">User Type</label>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field">
                    <input type="text" id="profile-stage" class="floating-input" placeholder=" " />
                    <label for="profile-stage" class="floating-label">Stage / Level</label>
                  </div>
                </div>

                <div class="profile-form-actions">
                  <button type="submit" class="btn btn--primary">Save Changes</button>
                  <button type="button" id="cancel-edit-btn" class="btn btn--secondary">Cancel</button>
                </div>
              </form>
          </div>
        </section>

        <!-- Security Section -->
        <section id="security" class="profile-section">
          <div class="profile-section__header">
            <h2 class="profile-section__title">Security</h2>
            <button type="button" id="edit-password-btn" class="btn btn--edit">Edit Password</button>
          </div>
          <div class="profile-card-section">
            <form id="password-form">
                <div class="form-group">
                  <div class="field password-wrapper">
                    <input type="password" id="current-password" class="floating-input" placeholder=" " required disabled />
                    <label for="current-password" class="floating-label">Current Password</label>
                    <button type="button" class="toggle-visibility" data-target="current-password" aria-label="Show password">üëÅÔ∏è</button>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field password-wrapper">
                    <input type="password" id="new-password" class="floating-input" placeholder=" " required disabled />
                    <label for="new-password" class="floating-label">New Password</label>
                    <button type="button" class="toggle-visibility" data-target="new-password" aria-label="Show password">üëÅÔ∏è</button>
                  </div>
                </div>

                <div class="form-group">
                  <div class="field password-wrapper">
                    <input type="password" id="confirm-password" class="floating-input" placeholder=" " required disabled />
                    <label for="confirm-password" class="floating-label">Confirm New Password</label>
                    <button type="button" class="toggle-visibility" data-target="confirm-password" aria-label="Show password">üëÅÔ∏è</button>
                  </div>
                </div>

                <div class="profile-form-actions" id="password-form-actions" style="display: none;">
                  <button type="submit" class="btn btn--primary" id="update-password-btn" disabled>Update Password</button>
                  <button type="button" id="cancel-password-btn" class="btn btn--secondary">Cancel</button>
                </div>
            </form>
          </div>
        </section>

        <!-- Points History Section -->
        <section id="points" class="profile-section">
          <h2 class="profile-section__title">Points History</h2>
          <div class="profile-card-section">
            <div id="points-history"></div>
          </div>
        </section>

        <!-- Danger Zone Section -->
        <section id="danger-zone" class="profile-section profile-section--danger">
          <h2 class="profile-section__title" style="display: none;">Danger Zone</h2>
          <div class="profile-card-section profile-card-section--danger">
            <p class="profile-section__description">
              Permanently delete your account and all associated data. This action cannot be undone.
            </p>
            <button type="button" id="delete-account-btn" class="btn btn--danger">Delete Account</button>
          </div>
        </section>
      </div>
    </main>

    <!-- Delete Account Confirm Modal -->
    <div id="delete-modal" class="modal" style="display: none;">
      <div class="modal__overlay"></div>
      <div class="modal__content">
        <div class="modal__header">
          <h3 class="modal__title">Confirm Account Deletion</h3>
        </div>
        <div class="modal__body">
          <p>Are you sure you want to permanently delete your account?</p>
          <p class="modal__warning">This action cannot be undone. All your data, points, and progress will be lost.</p>
        </div>
        <div class="modal__actions">
          <button type="button" id="delete-confirm-btn" class="btn btn--danger">Yes, Delete Account</button>
          <button type="button" id="delete-cancel-btn" class="btn btn--secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Scripts (order matters) -->
    <script src="/js/core.js" defer></script>
    <script src="/js/main.js" defer></script>
    <script src="/js/sidebar-inject.js" defer></script>
    <script src="/js/sidebar.js" defer></script>

    <!-- Auth modules -->
    <script type="module" src="/js/navAuth.js"></script>
    <script type="module" src="/js/profile.js"></script>
  </body>
</html>
